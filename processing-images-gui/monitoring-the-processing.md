# 처리 모니터링

처리가 시작되면 Chloros는 진행 상황을 모니터링하고, 문제를 확인하며, 데이터 세트에서 발생하는 상황을 파악할 수 있는 여러 방법을 제공합니다. 이 페이지에서는 처리를 추적하고 Chloros가 제공하는 정보를 해석하는 방법을 설명합니다.

## 진행률 표시줄 개요

상단 헤더의 진행률 표시줄은 실시간 처리 상태와 완료 비율을 보여줍니다.

### 무료 모드 진행률 표시줄

Chloros+ 라이선스가 없는 사용자의 경우:

**2단계 진행률 표시:**

1. **표적 탐지** - 이미지에서 보정 표적 찾기
2. **처리** - 보정 적용 및 내보내기

**진행률 표시창에 표시되는 내용:**

* 전체 완료율 (0-100%)
* 현재 단계 이름
* 단순한 수평 막대 시각화

### Chloros+ 진행률 표시창

Chloros+ 라이선스 보유 사용자용:

**4단계 진행률 표시:**

1. **검출** - 보정 대상 찾기
2. **분석** - 이미지 검토 및 파이프라인 준비
3. **보정** - 비네팅 및 반사율 보정 적용
4. **내보내기** - 처리된 파일 저장

**상호작용 기능:**

* **진행률 표시줄 위에 마우스 커서**를 올리면 확장된 4단계 패널 표시
* **진행률 바 클릭** - 확장된 패널 고정/고정 해제
* **다시 클릭** - 고정 해제 및 마우스 이탈 시 자동 숨김
* 각 단계별 개별 진행률 표시 (0-100%)

***

## 각 처리 단계 이해하기

### 1단계: 탐지 (표적 탐지)

**진행 내용:**

* Chloros는 &#x27;대상&#x27; 체크박스가 표시된 이미지를 스캔합니다
* 컴퓨터 비전 알고리즘이 4개의 보정 패널을 식별합니다
* 각 패널에서 반사율 값을 추출합니다
* 정확한 보정 일정 관리를 위해 대상 타임스탬프를 기록합니다

**소요 시간:**

* 표시된 대상이 있는 경우: 10~60초
* 표시된 대상이 없는 경우: 5~30분 이상 (모든 이미지 스캔)

**진행률 표시:**

* 감지 중: 0% → 100%
* 스캔된 이미지 수
* 발견된 타겟 개수

**주의 사항:**

* 타겟이 제대로 표시된 경우 빠르게 완료됨
* 시간이 너무 오래 걸릴 경우 타겟이 표시되지 않았을 수 있음
* 디버그 로그에서 &quot;타겟 발견&quot; 메시지 확인

### 2단계: 분석

**진행 내용:**

* 이미지 EXIF 메타데이터(타임스탬프, 노출 설정) 읽기
* 대상 타임스탬프 기반 보정 전략 결정
* 이미지 처리 대기열 구성
* 병렬 처리 작업자 준비(Chloros+ 전용)

**소요 시간:** 5~30초

**진행률 표시:**

* 분석 중: 0% → 100%
* 빠른 단계로 일반적으로 신속하게 완료됨

**주의 사항:**

* 중단 없이 꾸준히 진행되어야 함
* 누락된 메타데이터에 대한 경고는 디버그 로그에 표시됨

### 3단계: 보정

**진행 중인 작업:**

* **디베이어링**: RAW 베이어 패턴을 3채널로 변환
* **비네팅 보정**: 렌즈 가장자리 어두움 제거
* **반사율 보정**: 목표값으로 정규화
* **지수 계산**: 다중 스펙트럼 지수 계산
* 전체 파이프라인을 통한 각 이미지 처리

**소요 시간:** 전체 처리 시간의 대부분 (60-80%)

**진행률 표시기:**

* 보정 중: 0% → 100%
* 현재 처리 중인 이미지
* 완료된 이미지 / 총 이미지 수

**처리 동작:**

* **자유 모드**: 한 번에 한 장씩 순차적으로 처리
* **Chloros+ 모드**: 최대 16장 동시 처리
* **GPU 가속**: 이 단계 속도를 크게 향상시킵니다

**확인 사항:**

* 이미지 수에 따른 꾸준한 진행
* 디버그 로그에서 이미지별 완료 메시지 확인
* 이미지 품질 또는 보정 문제에 대한 경고

### 4단계: 내보내기

**진행 내용:**

* 선택한 형식으로 보정된 이미지 디스크에 기록
* LUT 색상 적용된 다중 스펙트럼 지수 이미지 내보내기
* 카메라 모델 하위 폴더 생성
* 적절한 확장자를 유지한 원본 파일명 보존

**소요 시간:** 전체 처리 시간의 10-20%

**진행률 표시기:**

* 내보내기: 0% → 100%
* 파일 쓰기 진행 중
* 내보내기 형식 및 대상 위치

**주의 사항:**

* 디스크 공간 경고
* 파일 쓰기 오류
* 모든 설정된 출력 완료 여부

***

## 디버그 로그 탭

디버그 로그는 처리 진행 상황 및 발생한 문제에 대한 상세 정보를 제공합니다.

### 디버그 로그 접근 방법

1. 왼쪽 사이드바의 **디버그 로그** <img src="../.gitbook/assets/icon_log.JPG" alt="" data-size="line"> 아이콘을 클릭합니다
2. 실시간 처리 메시지를 표시하는 로그 패널이 열립니다
3. 최신 메시지를 표시하도록 자동 스크롤됩니다

### 로그 메시지 이해

#### 정보 메시지 (흰색/회색)

정상적인 처리 업데이트:

```
[INFO] Processing started
[INFO] Target detected in IMG_0015.RAW - 4 panels found
[INFO] Calibrating IMG_0234.RAW
[INFO] Exported NDVI image: IMG_0234_NDVI.tif
[INFO] Processing complete
```

#### 경고 메시지 (노란색)

처리를 중단시키지 않는 비중요 문제:

```
[WARN] No GPS data found in IMG_0145.RAW
[WARN] Target image timestamp gap > 30 minutes
[WARN] Low contrast in calibration panel - results may vary
```

**조치:** 처리 후 경고 사항 검토, 중단하지 않음

#### 오류 메시지 (Red)

처리 실패를 유발할 수 있는 중대한 문제:

```
[ERROR] Cannot write file - disk full
[ERROR] Corrupted image file: IMG_0299.RAW
[ERROR] No targets detected - enable reflectance calibration or mark target images
```

**조치:** 처리 중지, 오류 해결 후 재시작

### 일반 로그 메시지

| 메시지                          | 의미                                | 필요한 조치                                         |
| -------------------------------- | -------------------------------------- | ----------------------------------------------------- |
| &quot;\[파일명\]에서 대상 감지됨&quot; | 교정 대상 성공적으로 발견됨  | 없음 - 정상                                         |
| &quot;Y개 중 X번째 이미지 처리 중&quot;        | 현재 진행 상황 업데이트                | 없음 - 정상                                         |
| &quot;대상 없음&quot;               | 교정 대상 감지되지 않음        | 대상 이미지 표시하거나 반사율 교정 비활성화 |
| &quot;디스크 공간 부족&quot;        | 출력용 저장 공간 부족          | 디스크 공간 확보                                    |
| &quot;손상된 파일 건너뛰기&quot;        | 이미지 파일 손상                  | SD 카드에서 파일 재복사                             |
| &quot;PPK 데이터 적용&quot;               | .daq 파일의 GPS 보정값 적용 | 없음 - 정상                                         |

### 로그 데이터 복사

문제 해결 또는 지원을 위해 로그를 복사하려면:

1. 디버그 로그 패널 열기
2. **&quot;로그 복사&quot;** 버튼 클릭 (또는 마우스 오른쪽 버튼 클릭 → 모두 선택)
3. 텍스트 파일 또는 이메일로 붙여넣기
4. 필요한 경우 MAPIR 지원팀에 전송

***

## 시스템 리소스 모니터링

### CPU 사용률

**자유 모드:**

* 1개 CPU 코어 약 100% 사용
* 나머지 코어 유휴 또는 사용 가능
* 시스템 응답성 유지

**Chloros+ 병렬 모드:**

* 다중 코어 80-100% 사용 (최대 16코어)
* 전체 CPU 사용률 높음
* 시스템 반응 속도 저하 가능

**모니터링 방법:**

* Windows 작업 관리자 (Ctrl+Shift+Esc)
* 성능 탭 → CPU 섹션
* &quot;Chloros&quot; 또는 &quot;chloros-backend&quot; 프로세스 확인

### 메모리(RAM) 사용량

**일반적인 사용량:**

* 소규모 프로젝트 (&lt; 100개 이미지): 2-4 GB
* 중간 규모 프로젝트 (100-500개 이미지): 4-8 GB
* 대규모 프로젝트 (500개 이상 이미지): 8-16 GB
* Chloros+ 병렬 모드는 더 많은 RAM을 사용합니다

**메모리가 부족할 경우:**

* 더 작은 배치 처리
* 다른 애플리케이션 종료
* 대규모 데이터셋을 정기적으로 처리할 경우 RAM 업그레이드

### GPU 사용량 (CUDA 지원 Chloros+)

GPU 가속 활성화 시:

* NVIDIA GPU 사용률 증가 (60-90%)
* VRAM 사용량 증가 (4GB 이상 VRAM 필요)
* 보정 단계가 현저히 빨라짐

**모니터링 방법:**

* NVIDIA 시스템 트레이 아이콘
* 작업 관리자 → 성능 → GPU
* GPU-Z 또는 유사 모니터링 도구

### 디스크 I/O

**예상되는 사항:**

* 분석 단계 중 높은 디스크 읽기
* 내보내기 단계 중 높은 디스크 쓰기
* SSD가 HDD보다 현저히 빠름

**성능 팁:**

* 가능하면 프로젝트 폴더에 SSD 사용
* 대용량 데이터셋에 네트워크 드라이브 사용 피하기
* 디스크 용량이 거의 가득 차지 않도록 확인(쓰기 속도 영향)

***

## 처리 중 문제 감지

### 경고 신호

**진행이 멈춤(5분 이상 변화 없음):**

* 디버그 로그에서 오류 확인
* 사용 가능한 디스크 공간 확인
* 작업 관리자에서 Chloros 실행 중인지 확인

**오류 메시지가 자주 나타남:**

* 처리를 중지하고 오류 검토
* 일반적인 원인: 디스크 공간 부족, 파일 손상, 메모리 문제
* 아래 문제 해결 섹션 참조

**시스템 응답 없음:**

* Chloros+ 병렬 모드에서 리소스 과다 사용
* 동시 작업 수 감소 또는 하드웨어 업그레이드 고려
* 프리 모드는 리소스 소모가 적음

### 처리 중지 시점

다음과 같은 경우 처리를 중지하십시오:

* ❌ &quot;디스크 공간 부족&quot; 또는 &quot;파일 쓰기 실패&quot; 오류
* ❌ 이미지 파일 손상 오류 반복 발생
* ❌ 시스템 완전 정지(응답 없음)
* ❌ 잘못된 설정 구성 확인
* ❌ 잘못된 이미지 파일 불러옴

**중단 방법:**

1. **중지/취소 버튼** 클릭 (시작 버튼 위치)
2. 처리 중단, 진행 상황 초기화
3. 문제 해결 후 처음부터 재시작

***

## 처리 중 문제 해결

### 처리 속도가 매우 느림

**가능한 원인:**

* 선택되지 않은 대상 이미지 (전체 이미지 스캔)
* SSD 대신 HDD 저장 장치 사용
* 시스템 리소스 부족
* 다수의 인덱스 구성
* 네트워크 드라이브 접근

**해결 방법:**

1. 시작 직후 탐지 단계일 경우: 취소 후 대상 지정 후 재시작
2. 향후 대비: SSD 사용, 인덱스 수 감소, 하드웨어 업그레이드
3. 대용량 데이터셋 일괄 처리 시 CLI 고려

### &quot;디스크 공간&quot; 경고

**해결 방법:**

1. 즉시 디스크 공간 확보
2. 프로젝트를 여유 공간이 있는 드라이브로 이동
3. 내보낼 인덱스 수 줄이기
4. TIFF 대신 JPG 형식 사용(파일 크기 감소)

### 빈번한 &quot;파일 손상&quot; 메시지

**해결 방법:**

1. SD 카드에서 이미지 재복사하여 무결성 확인
2. SD 카드 오류 검사
3. 프로젝트에서 손상된 파일 제거
4. 남은 이미지 처리 계속

### 시스템 과열 / 스로틀링

**해결 방법:**

1. 충분한 통풍 확보
2. 컴퓨터 통풍구 먼지 제거
3. 처리 부하 감소 (Chloros+ 대신 Free 모드 사용)
4. 하루 중 더 시원한 시간대 처리

***

## 처리 완료 알림

처리 완료 시:

* 진행률 표시줄이 100%에 도달함
* 디버그 로그에 **&quot;처리 완료&quot;** 메시지 표시됨
* 시작 버튼이 다시 활성화됨
* 모든 출력 파일이 카메라 모델 하위 폴더에 위치함

***

## 다음 단계

처리 완료 후:

1. **결과 검토** - [처리 완료](finishing-the-processing.md) 참조
2. **출력 폴더 확인** - 모든 파일이 올바르게 내보내졌는지 검증
3. **디버그 로그 검토** - 경고 또는 오류 발생 여부 확인
4. **처리된 이미지 미리보기** - 이미지 뷰어 또는 외부 소프트웨어 사용

처리된 결과물 검토 및 활용 방법에 대한 자세한 내용은 [처리 완료](finishing-the-processing.md)를 참조하십시오.
