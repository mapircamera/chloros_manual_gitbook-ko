# 이미지 레이어

Chloros 이미지 뷰어의 &#x27;이미지 레이어&#x27; 드롭다운 메뉴를 사용하면 동일한 이미지의 다양한 버전(원본 캡처부터 처리된 반사율 출력 및 계산된 지수 이미지까지)을 빠르게 전환할 수 있습니다.

## 이미지 레이어란 무엇인가요?

Chloros에서 **레이어**는 단일 소스 이미지에 대해 사용할 수 있는 다양한 이미지 출력을 의미합니다. 이미지를 처리할 때 Chloros는 여러 버전을 생성합니다:

* **원본 이미지** (카메라의 JPG 및 RAW 파일)
* **반사율 보정** 출력물 (반사율 보정이 활성화된 경우)
* **표적 이미지** (이미지에 보정 표적이 포함된 경우)
* **지표 이미지** (지표가 구성된 경우 NDVI, NDRE, GNDVI 등)

이미지 뷰어 우측 상단의 **레이어 선택기 드롭다운**을 통해 뷰어를 벗어나지 않고도 이러한 버전들 사이를 즉시 전환할 수 있습니다.

***

## 사용 가능한 레이어 유형

### JPG

* 카메라에서 직접 출력된 원본 JPG 미리보기 이미지
* 모든 이미지에 항상 사용 가능
* 카메라로 촬영된 그대로의 미처리 상태
* 로딩 및 표시 속도가 가장 빠름

**사용 시점:**

* 원본 촬영물의 빠른 미리보기
* 이미지 구도 및 프레임 확인
* 처리 전 촬영 품질 검증

### RAW (원본)

* 카메라의 원본 RAW 센서 데이터
* 디베이더링 처리만 적용된 상태(추가 후처리 없음)
* JPG보다 높은 비트 심도(일반적으로 12비트 또는 14비트 센서 데이터)

**사용 시점:**

* 원본 센서 데이터 품질 검사
* 센서 문제 또는 아티팩트 확인
* 처리 전후 결과 비교

### RAW (타겟)

* 보정 타겟이 포함된 이미지에만 표시됨
* 타겟이 감지된 원본 RAW 이미지 표시
* 타겟 감지 성공 여부 확인용

**확인 시기:**

* 보정 타겟이 정확히 감지되었는지 확인
* 타겟 이미지 품질 점검
* 보정 문제 해결

{% hint style=&quot;info&quot; %}
**표적 레이어**: 이 레이어는 보정 표적이 포함된 이미지의 드롭다운에서만 표시됩니다. 일반 촬영 이미지는 이 옵션이 없습니다.
{% endhint %}

### RAW (반사율)

* 보정된 반사율 출력 이미지
* 비네팅 보정 적용 (처리 시 활성화된 경우)
* 타겟 데이터로 반사율 보정 (활성화된 경우)
* 모든 카메라 채널을 포함한 다중 밴드 TIFF
* 픽셀 값은 백분율 반사율을 나타냄 (퍼센트 모드 사용 시)
* [인덱스/LUT 샌드박스]로 조작 가능(index-lut-sandbox.md)

**확인 시점:**

* 보정 결과 검토
* 보정 품질 검증
* 과학적 정확성을 위한 픽셀 값 확인
* 원본 비교를 통한 보정 효과 확인

{% hint style=&quot;success&quot; %}
**권장**: 과학적 측정 및 분석을 위한 픽셀 값 확인 시 RAW(반사율) 레이어를 사용하십시오.
{% endhint %}

### RAW(NDVI 지수)... 및 유사 항목

* 계산된 식생 지수 이미지 (본 예시에서는 NDVI)
* 지수명은 처리 중 설정된 지수에 따라 변경됩니다
* 예시: RAW (NDVI 지수), RAW (NDRE 지수), RAW (GNDVI 지수) 등
* 지수 계산 결과를 보여주는 단일 밴드 그레이스케일 이미지
* 프로젝트 설정에서 구성된 각 지수마다 하나의 레이어가 나타남

**가능한 지수 이름:**

* RAW (NDVI 지수)
* RAW (NDRE 지수)
* RAW (GNDVI 지수)
* RAW (OSAVI 지수)
* RAW (EVI 지수)
* RAW (SAVI 지수)
* 기타 다수... ([다중 스펙트럼 지수 공식](../project-settings/multispectral-index-formulas.md) 참조)

**사용 시점:**

* 지수 계산 결과 검토 시
* 지수 값 범위 확인 시
* 관심 영역 식별 시
* GIS 또는 분석에 사용하기 전 지수 이미지 검증 시

***

## 레이어 선택기 사용법

### 드롭다운 열기

1. 이미지를 전체 화면 모드로 엽니다(이미지 뷰어에서 아무 썸네일이나 클릭).
2. 뷰어 우측 상단의 **레이어 드롭다운** 찾기
3. 드롭다운에 현재 선택된 레이어 표시 (예: &quot;JPG&quot;)
4. 드롭다운 클릭 시 사용 가능한 모든 레이어 확인

### 레이어 전환

1. 레이어 드롭다운 클릭하여 목록 열기
2. 현재 이미지에 사용 가능한 모든 레이어 표시
3. 원하는 레이어 이름 클릭하여 해당 버전으로 전환
4. 선택한 레이어가 즉시 적용되어 이미지가 업데이트됩니다

**빠른 전환:**

* 드롭다운은 마지막 선택 내용을 기억합니다
* 다음 이미지로 이동 시 Chloros는 동일한 레이어 유형을 표시하려 시도합니다
* 다음 이미지에 해당 레이어가 존재하지 않으면 기본값인 JPG로 전환됩니다

### 레이어 사용 가능 여부

모든 이미지에 모든 레이어가 제공되는 것은 아닙니다:

**항상 사용 가능:**

* ✅ JPG (모든 이미지에 JPG 미리보기 제공)

**조건부 사용 가능:**

* ⚠️ RAW (원본) - 이미지가 RAW 또는 RAW+JPG 모드로 촬영된 경우에만 제공
* ⚠️ RAW (타겟) - 이미지에 교정 타겟이 감지된 경우에만 사용 가능
* ⚠️ RAW (반사율) - 반사율 교정 활성화 후 처리 시에만 사용 가능
* ⚠️ RAW (\[인덱스] 인덱스) - 인덱스 설정 후 처리 시에만 사용 가능

***

## 레이어 지속성

### 이미지 간 이동

다른 이미지로 이동할 때(화살표 키 또는 썸네일 클릭):

**레이어 설정은 유지됩니다:**

* &quot;RAW (반사율)&quot;을 보고 있을 경우, 다음 이미지는 &quot;RAW (반사율)&quot;을 표시합니다 (사용 가능한 경우)
* &quot;RAW (NDVI 인덱스)&quot;를 보고 있을 때, 다음 이미지는 &quot;RAW (NDVI 인덱스)&quot;를 표시합니다 (사용 가능한 경우)
* 동일한 레이어가 존재하지 않으면 JPG로 기본 설정됩니다

**예시 워크플로:**

1. 이미지 1을 열고 RAW (NDVI 인덱스) 레이어로 전환
2. → 버튼을 눌러 이미지 2 보기
3. 이미지 2에 RAW (NDVI 인덱스) 레이어가 자동으로 표시됨
4. 계속 탐색 - 모든 이미지에 NDVI 레이어 표시
5. 다수 이미지에서 인덱스 결과 검토 시 매우 효율적

***

## 일반적인 워크플로

### 워크플로 1: 전후 비교

**목표**: 원본 vs 보정 이미지 비교

1. 이미지 뷰어에서 처리된 이미지 열기
2. 드롭다운에서 **RAW (Original)** 선택
3. 비네팅 및 보정되지 않은 값 확인
4. 드롭다운에서 **RAW (Reflectance)**로 전환
5. 비교 - 비네팅 제거, 값 보정됨

### 워크플로 2: 인덱스 검토

**목표**: 데이터셋 전체에서 NDVI 결과 신속 검토

1. 첫 번째 처리된 이미지 열기
2. 드롭다운에서 **RAW (NDVI 인덱스)** 선택
3. → 화살표 키로 다음 이미지 이동
4. NDVI 레이어 자동 유지
5. 모든 이미지 순차 검토, NDVI 패턴 확인
6. **RAW (NDRE Index)**로 전환하여 비교

### 워크플로우 3: 타겟 검증

**목표**: 모든 타겟 이미지가 정확히 검출되었는지 확인

1. 타겟 이미지로 이동
2. 드롭다운에서 **RAW (Target)** 선택
3. 보정 타겟이 선명하게 표시되고 검출되었는지 확인
4. 다음 대상 이미지로 이동
5. 모든 대상에 대해 검증을 반복

### 워크플로우 4: 픽셀 값 검사

**목표**: 과학적 정확성을 위한 반사율 값 확인

1. 처리된 이미지 열기
2. **RAW (반사율)** 레이어 선택
3. **픽셀 백분율** 모드 활성화 (오른쪽 상단 도구 모음의 버튼)
4. 커서를 식생 영역 위로 이동
5. 픽셀 값이 예상 범위(NIR의 경우 30-70%, Red의 경우 5-15%)에 있는지 확인
6. 토양 및 수역 영역의 적절한 값 확인

***

## 레이어별 픽셀 값 이해

레이어별로 다른 픽셀 값 범위를 표시합니다:

### JPG 레이어

* **범위**: 0-255 (8비트)
* **의미**: 감마 보정된 표시 값
* **용도**: 시각적 검사 전용, 과학적 측정 불가

### RAW (원본)

* **범위**: 0-65535 (16비트)
* **의미**: 센서 원시 디지털 수치
* **용도**: 센서 성능 확인용, 보정되지 않음

### RAW (반사율)

* **범위**: 0-65,535 (16비트 TIFF) 또는 0.0-1.0 (32비트 백분율)
* **의미**: 보정된 백분율 반사율
* **용도**: 과학적 측정 및 분석

**16비트 TIFF의 경우:** 65,535로 나누어 백분율 반사율 구함 **32비트 백분율의 경우:** 값이 직접 백분율을 나타냄 (0.5 = 50% 반사율)

### RAW (지수 이미지)

* **범위**: 지수에 따라 다름 (일반적으로 정규화된 지수의 경우 -1.0 ~ +1.0)
* **의미**: 지수 계산 결과
* **예시**:
  * NDVI: -1 ~ +1 (식생은 일반적으로 0.4 ~ 0.9)
  * NDRE: -1 ~ +1 (스트레스 감지)
  * EVI: 0 ~ 1 (강화된 식생)

***

## 팁 및 모범 사례

### 효율적인 레이어 전환

* **키보드 단축키 활용**: 레이어 전용 단축키는 없으나, 방향키(←/→)로 모든 레이어 간 이동 가능
* **일관된 작업 흐름**: 한 레이어(예: NDVI)를 선택한 후 전체 데이터셋 검토 후 다른 레이어로 전환
* **빠른 비교**: 원본과 반사율 레이어를 전환하며 처리 품질 확인

### 성능 고려 사항

* **JPG 로딩 속도 가장 빠름**: 다수 이미지 신속 탐색 시 사용
* **RAW 레이어 로딩 속도 느림**: 고해상도 및 높은 비트 심도
* **인덱스 레이어**: 반사율 레이어와 유사한 속도
* **첫 로딩이 가장 느림**: 동일 레이어 후속 뷰는 캐싱되어 더 빠름

### 품질 검증

* **항상 RAW(원본) 확인**: 처리된 결과물을 신뢰하기 전에 원본 데이터 품질 검증
* **레이어 비교**: 레이어 전환을 통해 처리 과정의 정확성 검증
* **인덱스 범위 확인**: 인덱스 레이어에 픽셀 퍼센트 모드 적용하여 값의 타당성 검증

***

## 문제 해결

### 레이어 미표시

**문제**: 예상 레이어가 드롭다운에 표시되지 않음

**가능한 원인:**

* 이미지가 처리되지 않음 (JPG 및 RAW(원본)만 사용 가능)
* 처리 중 반사율 보정이 비활성화됨
* 프로젝트 설정에서 특정 인덱스가 구성되지 않음
* 대상 전용 이미지임 (대상에 대한 인덱스 생성 없음)

**해결 방법:**

1. 이미지 처리 여부 확인 (출력 폴더에 처리된 파일 존재 여부 확인)
2. 프로젝트 설정에서 지수 레이어 구성 여부 확인
3. 원하는 지수 레이어를 활성화한 상태로 재처리

### 잘못된 레이어 표시

**문제**: 이미지가 예상치 못한 레이어로 열림

**원인**: 이전 이미지에서 설정된 레이어 선호도가 이어졌으나, 해당 레이어가 현재 이미지에 존재하지 않음

**해결 방법**: Chloros는 선호 레이어를 사용할 수 없을 때 자동으로 JPG로 대체됩니다. 이는 정상적인 동작입니다.

### 교정 타겟이 보이지 않음

**문제**: RAW(타겟) 레이어에 타겟 감지 결과가 표시되지 않음

**가능한 원인:**

* 처리 중 타겟이 감지되지 않음
* 이미지에 실제 타겟이 포함되지 않음
* 타겟 감지 설정이 너무 엄격함

**해결 방법:**

1. 디버그 로그에서 &quot;타겟 발견&quot; 메시지 확인
2. 이미지에 실제 가시적 보정 타겟이 포함되었는지 확인
3. 프로젝트 설정에서 타겟 감지 설정 조정
4. [타겟 이미지 선택](../processing-images-gui/choosing-target-images.md) 참조

***

## 관련 기능

### 이미지 뷰어 도구

모든 레이어를 볼 때 다음을 사용할 수 있습니다:

* **확대/축소 컨트롤**: 세부 사항을 확인하기 위해 확대
* **이동**: 확대된 이미지에서 클릭하고 드래그하여 이동
* **픽셀 값 확인**: 커서 위치의 값 확인
* **탐색 화살표**: 레이어를 유지한 채 이미지 간 이동
* **픽셀 퍼센트 모드**: DN과 퍼센트 표시 간 전환

이미지 뷰어 전체 문서는 [이미지 전체 화면 열기](opening-an-image-full-screen.md) 참조.

### 인덱스/LUT 샌드박스

인터랙티브 인덱스 테스트 및 시각화를 위해:

* **실시간 인덱스 계산**: 다양한 인덱스 공식 테스트
* **LUT 컬러 매핑**: 그레이스케일 인덱스에 컬러 그라데이션 적용
* **시각화 내보내기**: 컬러 인덱스 이미지 저장

자세한 내용은 [인덱스/LUT 샌드박스](index-lut-sandbox.md)를 참조하세요.

***

## 다음 단계

이미지 레이어를 이해하셨다면:

* [**이미지 전체 화면 열기**](opening-an-image-full-screen.md) - 이미지 뷰어 완전 가이드
* [**인덱스/LUT 샌드박스**](index-lut-sandbox.md) - 대화형 인덱스 시각화
* [**다중 스펙트럼 지수 공식**](../project-settings/multispectral-index-formulas.md) - 사용 가능한 지수 참조
* [**처리 완료**](../processing-images-gui/finishing-the-processing.md) - 처리된 출력 결과 이해하기
