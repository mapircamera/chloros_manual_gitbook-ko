# 인덱스/LUT 샌드박스

인덱스/LUT 샌드박스는 Chloros 이미지 뷰어 내의 대화형 작업 공간으로, 다중 스펙트럼 인덱스 계산과 컬러 시각화를 실시간으로 실험할 수 있게 합니다. 이 강력한 도구를 사용하면 전체 데이터셋을 재처리하지 않고도 다양한 인덱스를 테스트하고, 값 범위를 조정하며, 출판 가능한 시각화를 생성할 수 있습니다.

## 인덱스/LUT 샌드박스란?

### 목적

샌드박스는 다음을 제공합니다:

* **실시간 인덱스 계산** - 모든 식생 지수를 즉시 적용
* **대화형 LUT 조정** - 색상 그라데이션 및 범위 미세 조정
* **워크플로 최적화** - 일괄 처리 전 최적 설정 결정

### 샌드박스 vs. 프로젝트 처리

**인덱스/LUT 샌드박스 (대화형):**

* 한 번에 단일 이미지 처리
* 즉각적인 피드백
* 실험적이며 반복적
* 파일에 영구적 변경 없음
* 탐색 및 테스트에 최적

**프로젝트 처리 (일괄):**

* 전체 데이터셋 한 번에 처리
* 사전 설정된 옵션
* 영구적인 출력 파일 생성
* 시간이 많이 소요됨
* 설정이 확정된 경우 최적

{% hint style=&quot;success&quot; %}
**최적 워크플로**: 샌드박스를 활용해 최적의 인덱스 및 LUT 설정을 실험하고 찾은 후, 프로젝트 처리 시 전체 데이터셋에 해당 설정을 적용하세요.
{% endhint %}

***

## 인덱스/LUT 샌드박스 활용법

### 사전 계산된 인덱스 이해하기

Chloros에서는 프로젝트 처리 중 인덱스를 적용할 수 있습니다. 내보내기에 적용할 인덱스 및 LUT 설정을 결정하는 가장 쉬운 방법은 이미지 뷰어 샌드박스를 사용하는 것입니다.

샌드박스를 통해 다음을 수행할 수 있습니다:

* **새로운 인덱스 및 색상 그라데이션(LUT) 적용**으로 데이터 시각화
* **시각화 설정** 대화형 조정
* **이미 계산된**인덱스 이미지**보기*** 모든 확대/축소 수준에서 픽셀 값 **검사**

### 샌드박스 열기

인덱스/LUT 샌드박스는 **이미지 뷰어** <img src="../.gitbook/assets/icon_image-viewer.JPG" alt="" data-size="line"> 사이드바 탭에서 접근할 수 있습니다:

1. 파일 브라우저 이미지 그리드에서 이미지를 클릭하면 **이미지 뷰어** <img src="../.gitbook/assets/icon_image-viewer.JPG" alt="" data-size="line"> 탭에 열립니다
2. **이미지 뷰어** <img src="../.gitbook/assets/icon_image-viewer.JPG" alt="" data-size="line"> 탭을 클릭하면 왼쪽 팝아웃 사이드바가 열립니다(아직 열려 있지 않은 경우)

### 인덱스/LUT 적용 대상 이미지 선택

이미지 뷰어 <img src="../.gitbook/assets/icon_image-viewer.JPG" alt="" data-size="line"> 샌드박스에서 인덱스를 작업하려면:

1. 메인 이미지 그리드에서 이미지를 클릭하여 **열기**

2.**이미지 뷰어** <img src="../.gitbook/assets/icon_image-viewer.JPG" alt="" data-size="line"> 탭이 열립니다
3. **레이어 드롭다운**(뷰어 우측 상단)을 클릭합니다
4. 드롭다운에서 레이어를 선택합니다:
   * RAW (반사율)

### 이미지에 인덱스 적용하기

이미지가 전체 화면으로 표시되고 **이미지 뷰어** <img src="../.gitbook/assets/icon_image-viewer.JPG" alt="" data-size="line"> 탭 사이드바가 열리면:

1. 사이드바 상단의 인덱스 상자를 선택하세요
2. 왼쪽 드롭다운에서 카메라 필터를 선택하세요
3. 오른쪽 드롭다운에서 원하는 인덱스 공식을 선택하세요
4. 필터 채널 색상 원을 아래 인덱스 공식의 위치로 드래그하세요
5. 공식이 유효하면 이미지가 업데이트되어 인덱스 값을 표시합니다
6. 마우스 커서를 이동하여 커서 위치의 값을 확인하세요
7. 확대하여 개별 픽셀과 연관된 값 확인

각 인덱스는 특정 값 범위와 의미를 가집니다:

#### NDVI 예시

```

Formula: (NIR - Red) / (NIR + Red)

For Survey3W RGN camera:
NIR = 850nm band
Red = 661nm band

Result range: -1.0 to +1.0
Typical vegetation: 0.4 to 0.9
Stressed vegetation: 0.2 to 0.4
Bare soil: 0.0 to 0.2
Water: -0.1 to 0.1
```

전체 인덱스 공식 문서는 [다중 스펙트럼 인덱스 공식](../project-settings/multispectral-index-formulas.md)을 참조하세요.

***

## LUT(룩업 테이블) 작업

### LUT란 무엇인가요?

**룩업 테이블(LUT)**은 시각화를 위해 수치적 지수 값을 색상으로 매핑합니다:

* **입력**: 지수 픽셀 값 (예: NDVI 0.65)
* **출력**: RGB 색상 (예: 밝은 녹색)
* **목적**: 패턴을 더 쉽게 보고 해석할 수 있도록 함**그레이스케일 대 컬러 LUT:**

* 그레이스케일: 과학적이고 중립적이며, 원시 데이터를 보여줌
* 컬러 LUT: 직관적이고 인상적이며, 패턴과 차이를 강조함

{% hint style=&quot;success&quot; %}
**시각화 효과**: 그레이스케일 인덱스 이미지에 컬러 LUT를 적용하면 패턴, 이상치, 관심 영역을 한눈에 식별하기가 획기적으로 쉬워집니다.
{% endhint %}

### 인덱스 이미지에 LUT 적용하기

인덱스 이미지가 준비되면

1. <img src="../.gitbook/assets/image (1) (1).png" alt="" data-size="line"> &quot;+Add LUT&quot; 버튼을 클릭합니다
2. 색상 그라데이션을 선택합니다
3. 클리핑 최소/최대 종점을 조정합니다
4. 클리핑 모드를 조정합니다
5. **이미지 뷰어**<img src="../.gitbook/assets/icon_image-viewer.JPG" alt="" data-size="line"> 탭 사이드바의**이미지 뷰어**에서 인덱스 상자를 선택하여 LUT 적용

### 색상 그라데이션 선택

**그라데이션 선택 방법:**

1. LUT 패널에서**컬러 그라데이션 바**를 찾습니다
2. 마우스를 올려놓으면 사용 가능한 그라데이션 프리셋을 볼 수 있습니다
3. 원하는 그라데이션을 선택합니다
4. 인덱스 상자가 선택되면 이미지가 **즉시 업데이트**되어 새로운 색상이 적용됩니다

{% hint style=&quot;success&quot; %}
**권장 설정**: NDVI와 같은 식생 지수의 경우, Red-Yellow-Green 그라데이션이 가장 직관적입니다. 이는 자연스러운 색상 연관성(녹색=건강, 노란색=보통, 빨간색=스트레스)과 일치하기 때문입니다.
{% endhint %}

### 색상 클래스 조정

**클래스 제어**는 그라데이션에 표시되는 개별 색상 단계의 수를 결정합니다:**클래스 수 옵션:*** **2-5개 클래스**: 매우 넓은 범주, 뚜렷한 구역
* **6-10개 클래스**: 균형 잡힌, 분류에 적합
* **11-20개 클래스**: 부드러운 그라데이션, 연속적인 외관
* **20개 이상 클래스**: 거의 연속적, 최대 부드러움**조정 방법:**

1. LUT 패널에서**그라데이션 바 아래의 색상 견본 사각형**을 찾습니다
2. + 버튼을 눌러 클래스 수를 추가합니다
3. 색상 견본을 더블 클릭하여 클래스 수를 제거합니다
4. 이미지에 그라데이션이 **실시간으로** 업데이트됩니다**시각화 효과:*** **적은 클래스** (3-5): 뚜렷한 구역 생성, 단순화된 분류, 범주 구분 용이
* **중간 클래스** (6-10): 균형 잡힌 접근, 대부분의 용도에 적합
* **많은 클래스** (15-20): 부드러운 전환, 세밀한 변형, 사진 같은 외관**사용 시점:*** **소수 클래스(3-5)**: 프레젠테이션 슬라이드, 분류 지도, 간단한 보고서
* **중간 클래스(6-10)**: 일반 분석, 균형 잡힌 세부 사항, 표준 보고서
* **다수 클래스(15-20)**: 과학적 분석, 상세한 검사, 출판물 수준의 결과물

### 값 범위 미세 조정

**값 범위 제어**는 그라데이션에서 어떤 색상 지수가 어떤 색상에 매핑되는지 결정합니다:**LUT 패널의 범위 제어:*** **최소값**: 색상 척도의 하한
* **최대값**: 색상 척도의 상한
* **중간값**: 최소값과 최대값 사이 자동 분배 (클래스 수 기반)

#### 최소/최대 값 조정

**값 범위 조정 방법:**

1. LUT 패널에서**최소값**및**최대값** 입력 필드를 찾습니다
2. **최소값** 필드를 클릭합니다
3. 원하는 최소값을 입력합니다 (예: `0.2`)
4. **Enter** 키를 누르거나 필드 외부를 클릭합니다
5. **최대값** 필드에도 동일하게 반복합니다 (예: `0.9`)
6. 시각화 결과가 **즉시 업데이트**됩니다

{% hint style=&quot;info&quot; %}
**자동 스케일링**: LUT를 처음 적용하면 Chloros가 이미지의 실제 데이터 범위에 따라 최소/최대값을 자동 설정합니다. 이후 관심 있는 특정 값 범위에 집중하기 위해 이 범위를 좁힐 수 있습니다.
{% endhint %}

**범위 조정 예시:*** **전체 범위**: `-1.0` ~ `1.0` (가능한 모든 값 표시)
* **식생 중심**: `0.2` ~ `0.9` (노출된 토양 및 물 제외)
* **건강한 식생만**: `0.5` ~ `0.9` (생장 상태가 양호한 식물만 강조)
* **스트레스 감지**: `0.2` ~ `0.5` (문제 영역 강조)
* **사용자 지정 범위**: 관측된 픽셀 값에 따라 조정**범위를 조정하는 이유?*** 관심 영역의 **대비 강화*** **관련 없는 값 제외** (예: 수역, 노출된 토양)
* **표현 표준화** (다중 이미지 또는 날짜 간)
* **미세한 차이 강조** (좁은 값 범위 내)

### 범위 초과 값 클리핑

픽셀 값이 정의된 최소/최대 범위를 벗어날 경우, **클리핑 모드**를 통해 표시 방식을 제어할 수 있습니다.

#### **사용 가능한 클리핑 모드 옵션:**

#### 1. 최소값 및 최대값

* **최소값 미만**픽셀 → 그라데이션의**첫 번째 색상**(예: 빨강)으로 표시
* **최대값 초과**픽셀 → 그라데이션의**마지막 색상**(예: 녹색)으로 표시
* **사용 사례**: 극단값 강조, 한계값에서 채도가 높은 색상으로 전체 데이터 범위 표시
* **예시**: NDVI 값이 0.2 미만인 경우 모두 빨간색으로, 0.9 초과인 경우 모두 녹색으로 표시

#### 2. 투명한 배경

* **범위 외**픽셀은**완전히 투명**하게 처리
* **범위 내** 픽셀만 색상 그라데이션 표시
* **사용 사례**: GIS 오버레이, 특정 값 범위 분리, 관심 영역만 강조
* **예시**: NDVI 0.4-0.7 범위만 색상 표시, 나머지는 투명

{% hint style=&quot;warning&quot; %}
**투명도 제한**: 투명한 픽셀은 뷰어에서 배경색으로 표시됩니다. 처리 중 내보낼 때 PNG 형식에서는 투명도가 유지되지만 JPG에서는 유지되지 않습니다.
{% endhint %}

#### 3. 인덱스 배경

* **범위 외**픽셀은**그레이스케일**로 표시(원시 인덱스 값 표시)
* **범위 내**픽셀은**색상 그라데이션**으로 표시
* **사용 사례**: 미묘한 강조, 관심 영역 강조 시 컨텍스트 유지
* **예시**: 스트레스 받은 식생(NDVI 0.3-0.5)을 컬러로 강조 표시하고 건강한 영역은 회색으로 표시

#### 4. 원본 배경

* **범위 외**픽셀은**원본 다중 스펙트럼 이미지** 표시
* **범위 내**픽셀은**색상 그라데이션** 표시
* **사용 사례**: 가장 직관적 - 자연스러운 이미지 컨텍스트와 분석적 컬러 오버레이 결합
* **예시**: 실제 필드/작물 외관을 확인하면서 스트레스 영역에 컬러 코딩 오버레이 적용

### 적절한 클리핑 모드 선택

| 클리핑 모드              | 최적 적용 분야                                   | 시각화 스타일          |
| -------------------------- | ------------------------------------------ | ---------------------------- |
| **최소값 및 최대값**    | 전체 데이터 표시, 과학적 분석     | 모든 픽셀에 색상 적용           |
| **투명 배경** | GIS 오버레이, 특정 범위 분리    | 범위 내 색상, 범위 외 공백 |
| **색인 배경**       | 미묘한 강조, 데이터 맥락 유지     | 범위 내 컬러, 범위 외 회색  |
| **원본 배경**    | 보고서, 프레젠테이션, 직관적 분석 | 범위 내 컬러, 범위 외 사진 |

### 사용자 정의 LUT 색상 생성

시각화를 완벽하게 제어하려면 개별 색상 정지점을 편집하여 **사용자 정의 색상 그라데이션**을 생성할 수 있습니다.**사용자 정의 그라데이션 생성 방법:**

1. LUT 패널에서**그라데이션 미리보기 막대**를 찾습니다
2. 그라데이션 아래의 **색상 견본 사각형**을 확인합니다
3. **색상 정지점을 클릭**하여 선택합니다
4. **색상 선택기**가 열립니다
5. 다음 방법으로 새 색상 선택:
   * **컬러 휠**: 시각적 색상 선택
   * **HSV 슬라이더**: 정밀한 색상 제어
   * **16진수 코드 입력**: 정확한 색상 지정 (예: 빨강 `#FF0000`)
6. 색상 선택기 밖을 클릭하여 **새 색상을 적용**합니다
7. 이미지의 그라데이션이 **즉시 업데이트**됩니다**색상 정지점 추가 또는 제거:*** **정지점 추가**: + 아이콘을 클릭하여 끝에 새 색상 견본 추가
* **정지점 제거**: 색상 사각형을 더블 클릭하여 견본 제거**사용자 지정 전략:*** **그라데이션 반전**: 색상 순서를 뒤집어 의미 역전 (예: 녹색=낮음, 빨간색=높음)
* **브랜드 색상**: 보고서용 조직의 색상 팔레트와 일치
* **색맹 친화적**: 주황-파랑 또는 보라-노랑 조합 사용
* **인쇄 최적화**: 컬러 및 그레이스케일 인쇄 모두에서 효과적인 색상 선택
* **다중 임계값**: 특정 값 임계값에서 분류를 위한 고유한 색상 사용

{% hint style=&quot;info&quot; %}
**사용자 정의 그라데이션 저장**: 사용자 정의 그라데이션은 저장하여 재사용할 수 있습니다. LUT 패널의 저장 아이콘을 클릭하여 사용자 정의 색상 구성표를 향후 사용을 위해 보존하세요.
{% endhint %}

***

## 인터랙티브 워크플로

### 실시간 업데이트

샌드박스 내 모든 LUT 조정은 이미지를 **즉시 및 인터랙티브하게** 업데이트합니다:

* **레이어 전환** → 이미지 즉시 변경
* **그라데이션 선택** → 색상 즉시 업데이트
* **값 범위 조정** → 대비 실시간 변경
* **클래스 변경** → 그라데이션 부드러움 즉시 업데이트
* **클리핑 수정** → 배경 표시 즉시 변경
* **색상 편집** → 사용자 정의 그라데이션 즉시 적용**&quot;적용&quot; 버튼 불필요** - 모든 변경 사항은 실시간으로 상호작용됩니다!

{% hint style=&quot;success&quot; %}
**실시간 피드백**: 즉각적인 시각적 피드백을 통해 분석 요구에 맞는 최적의 시각화를 찾을 때까지 다양한 설정을 빠르게 실험할 수 있습니다.
{% endhint %}

### 반복적 개선 워크플로

**일반적인 LUT 최적화 워크플로:**

1.**지수 레이어 선택** (예: RAW (반사율))
2. **지수 적용** - 카메라 필터 및 지수 공식 선택, 색상 원을 지수 공식 내 적절한 위치로 드래그
3. **LUT 그라디언트 적용** - Red-Yellow-Green 프리셋으로 시작
4. **픽셀 값 검사** - 커서를 이동하며 값 범위를 확인
5. **최소/최대값 조정** - 식생에 집중하도록 범위를 좁힘 (예: 0.2 ~ 0.9)
6. **클리핑 선택** - 맥락 파악을 위해 &quot;Original Background&quot; 시도
7. **색상 세밀 조정** - 특정 강조를 위해 필요 시 그라디언트 맞춤 설정
8. **설정 확정**- 설정을 기록하고 내보내기 처리를 위해 프로젝트 설정으로 복사

### 픽셀 값 확인

효과적인 LUT 범위를 설정하려면 실제 픽셀 값을 이해하는 것이 중요합니다:**값 확인 방법:**

1. 이미지의 인덱스 상자 또는 인덱스와 LUT 상자 모두**선택** 시 픽셀 값이 표시됩니다.
2. 이미지의 다양한 영역 위에 **커서를 이동**하세요
3. 커서 이동 시 표시되는 레전드의 **픽셀 값 확인**

4. 확대하여 개별 픽셀과 부동 값 확인
5. 다양한 특징별 값 범위 **기록**:
   * **건강한 식생**: 예: NDVI 0.55-0.85
   * **스트레스 받은 식생**: 예: NDVI 0.30-0.50
   * **노출된 토양**: 예: NDVI 0.05-0.25
   * **물** (존재 시): 예: NDVI -0.05 ~ 0.10**픽셀 값을 이용한 LUT 범위 설정:**픽셀 값을 확인한 후 LUT 최소/최대값을 적절히 조정하십시오:**예시 시나리오:*** **관측**: 토양 값 = 0.05-0.25, 스트레스 = 0.25-0.50, 건강 = 0.50-0.85
* **목표**: 식물 건강 상태만 시각화 (토양 제외)
* **LUT 설정**: 최소값 = `0.25`, 최대값 = `0.85`
* **클리핑**: &quot;원본 배경&quot;으로 설정하여 토양을 자연색으로 표시
* **결과**: 색상 그라데이션은 식생에만 적용되며, 토양은 원본 이미지로 표시됨

{% hint style=&quot;info&quot; %}
**동적 범위**: 작물 종류, 계절, 생장 단계에 따라 값 범위가 다릅니다. LUT 범위를 설정하기 전에 항상 특정 데이터 세트의 픽셀 값을 확인하십시오.
{% endhint %}

***

## 사용자 정의 지수 (Chloros+)

### 사용자 정의 지수 공식 생성

{% hint style=&quot;info&quot; %}
**생성 위치**: 사용자 정의 인덱스는 처리 전**프로젝트 설정**에서 구성하거나 이미지 뷰어 샌드박스 사이드바에서 설정할 수 있습니다.
{% endhint %}

**사용자 정의 인덱스 생성 방법:**

1.**프로젝트 설정**(처리 전) 또는 이미지 뷰어 샌드박스 사이드바 열기
2. **인덱스 공식 드롭다운**으로 이동
3. **&quot;사용자 정의&quot;** 옵션 찾기(Chloros+ 라이선스로 로그인해야 함)
4. 밴드 변수를 사용하여 **공식을 정의**하세요:
   * 밴드 이름: `NIR`, `Red`, `Green`, `Blue`, `RedEdge` 등
   * 연산자: `+`, `-`, `*`, `/`, `^` (지수)
   * 함수: `sqrt()`, `abs()` 등 (지원되는 경우)
   * 괄호: 연산 순서를 위한 `()`
5. **인덱스 명명** (예: &quot;MyIndex&quot; 또는 &quot;CustomNDVI&quot;)
6. **구성 저장**

**사용자 정의 공식 예시:**

```

Modified NDVI with offset:
(NIR - Red) / (NIR + Red + 0.5)

Simple ratio:
NIR / Red

Complex multi-band:
(NIR - Red) / (NIR + Red - Blue)

Exponential index:
(NIR / Red) ^ 2
```

{% hint style=&quot;warning&quot; %}

****공식 유효성 검사**: 카메라에서 사용 가능한 밴드를 공식에 사용했는지 확인하십시오. 예를 들어, RedEdge는 RedEdge 필터가 장착된 카메라에서만 사용 가능합니다.
{% endhint %}

***

## 다음 단계

인덱스/LUT 샌드박스를 이해하셨다면:

* **처리 적용**: [프로젝트 설정](../project-settings/project-settings.md)에서 발견된 설정 사용
* **일괄 처리**: 최적화된 인덱스를 전체 데이터셋에 적용
* **추가 학습**: [다중 스펙트럼 인덱스 공식](../project-settings/multispectral-index-formulas.md) 참조

관련 문서:

* [**이미지 레이어**](image-layers.md) - 레이어 관리 및 시각화
* [**이미지 전체 화면 열기**](opening-an-image-full-screen.md) - 이미지 뷰어 기본 기능
* [**이미지 처리 (GUI)**](../processing-images-gui/adding-files-to-a-project.md) - 전체 처리 워크플로
